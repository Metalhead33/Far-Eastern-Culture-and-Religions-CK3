# Code on-action: character changes faith. Not called when a character gets a faith on birth, creation, and similar
# Root is the character
# scope:old_faith is the faith they used to have
on_character_faith_change = {
	events = {
		jewish_courtier.0010
	}
}
carn_character_initialization_pulse = {
	events = {
	sacred_language.0001
	}
}

on_game_start = {
	on_actions = {
		change_orthodox_to_pravoslav
		change_egyptian_to_coptic
		change_coptic_to_tewahedo
	}
}

change_egyptian_to_coptic = {
	effect = {
		every_living_character = {
			limit = {
				faith = faith:coptic
				culture = culture:egyptian
			}
			set_culture = culture:egyptian_copt
			every_ancestor = {
				limit = {
					faith = faith:coptic
					culture = culture:egyptian
				}
				set_culture = culture:egyptian_copt
			}
		}
		every_county = {
			limit = {
				faith = faith:coptic
				culture = culture:egyptian
			}
			set_county_culture = culture:egyptian_copt
		}
	}
}
change_coptic_to_tewahedo = {
	effect = {
		every_living_character = {
			limit = {
				faith = faith:coptic
				culture = { has_cultural_pillar = language_ethiopic }
			}
			set_character_faith = faith:tewahedo
			every_ancestor = {
				limit = {
					faith = faith:coptic
					culture = { has_cultural_pillar = language_ethiopic }
				}
				set_character_faith = faith:tewahedo
			}
		}
		every_county = {
			limit = {
				faith = faith:coptic
				culture = { has_cultural_pillar = language_ethiopic }
			}
			set_county_faith = faith:tewahedo
		}
	}
}
change_orthodox_to_pravoslav = {
	effect = {
		every_living_character = {
			limit = {
				faith = faith:orthodox
				OR = {
					culture = { has_cultural_pillar = language_slavonic }
					culture = { has_cultural_pillar = language_wallachian }
				}
			}
			set_character_faith = faith:slavic_christian
			every_ancestor = {
				limit = {
					faith = faith:orthodox
					OR = {
						culture = { has_cultural_pillar = language_slavonic }
						culture = { has_cultural_pillar = language_wallachian }
					}
				}
				set_character_faith = faith:slavic_christian
			}
		}
		every_county = {
			limit = {
				faith = faith:orthodox
				OR = {
					culture = { has_cultural_pillar = language_slavonic }
					culture = { has_cultural_pillar = language_wallachian }
				}
			}
			set_county_faith = faith:slavic_christian
		}
	}
}
